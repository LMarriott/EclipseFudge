(()=>{var e={314:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,'@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-Regular.otf")}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-Italic.otf");font-style:italic}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-Light.otf");font-weight:300}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-LightItalic.otf");font-style:italic;font-weight:300}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-Bold.otf");font-weight:bold}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-BoldItalic.otf");font-style:italic;font-weight:bold}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-Black.otf");font-weight:900}@font-face{font-family:"Montserrat";src:url("/systems/fatex/assets/fonts/Montserrat-BlackItalic.otf");font-style:italic;font-weight:900}@font-face{font-family:"Fate Icons";src:url("/systems/fatex/assets/fonts/fate_icons.ttf")}.app{color:#fff}.window-app .window-content,#chat-log .message,#chat-form textarea,#chat-controls div.roll-type-select select,.sidebar-tab .directory-header .header-search input,#chat-form .cm-s-easymde{background:#f1f2f6}#chat-log{font-family:"Montserrat",sans-serif,sans-serif}.fatex__sheet_setup{padding:10px;min-width:100%}.fatex__sheet_setup h2{border:0;margin-bottom:10px}.fatex__sheet_setup__setup{margin-top:40px}.fatex__sheet_setup__actions{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr 1fr;gap:5px 5px;grid-template-areas:"topl topm right" "bottoml bottomm right"}.fatex__sheet_setup__actions .setup_action--clear-aspects{grid-area:topl}.fatex__sheet_setup__actions .setup_action--clear-consequences{grid-area:topm}.fatex__sheet_setup__actions .setup_action--clear-skills{grid-area:bottoml}.fatex__sheet_setup__actions .setup_action--clear-stress{grid-area:bottomm}.fatex__sheet_setup__actions .setup_action--clear{grid-area:right}.fatex__sheet_setup__action{cursor:pointer;border:1px solid #2f3542;border-radius:3px;padding:5px;display:flex;align-items:center;justify-content:center;transition:all 0.3s;font-size:12px}.fatex__sheet_setup__action:hover{background-color:rgba(0,0,0,0.3)}.fatex__sheet_setup__action.fatex__sheet_setup__action--disabled{pointer-events:none;opacity:0.3}.setup_action--clear span:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f714"}.setup_action--clear span:before{display:block;text-align:center}.fatex__sheet_setup__type{margin-bottom:20px}.fatex__sheet_setup__type .fatex__headline__actions{font-size:10px;opacity:1;pointer-events:all}.fatex__sheet_setup__groups{display:flex;flex-wrap:wrap}.fatex__sheet_setup__group{padding:10px;width:50%;min-width:180px}.fatex__sheet_setup__group:only-child,.fatex__sheet_setup__group.fatex__sheet_setup__group--columns{width:100%}.fatex__sheet_setup__group__label{font-weight:bold;text-transform:uppercase;margin-bottom:10px;display:block;font-size:10px;position:relative;cursor:pointer}.fatex__sheet_setup__options--columns{column-count:2}.fatex__sheet_setup__options--columns .fatex__sheet_setup__option{page-break-inside:avoid}.fatex__sheet_setup__option{display:flex}.fatex__sheet_setup__option+.fatex__sheet_setup__option{margin-top:10px}.fatex__sheet_setup__option__box{display:inline-block;width:16px;height:16px;border:1px solid #2f3542;border-radius:3px;margin-right:10px;color:#fff;font-size:11px;text-align:center}.fatex__sheet_setup__option__checkbox{position:absolute;opacity:0;left:-10000px;top:-10000px}.fatex__sheet_setup__option__checkbox:checked+.fatex__sheet_setup__option__box{background:#2f3542}.fatex__sheet_setup__option__checkbox:checked+.fatex__sheet_setup__option__box:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f00c"}.fatex__sheet_setup__type__actions{padding:10px 10px 0;text-align:center}.fatex__sheet_setup__type__action{padding:10px;background:#2f3542;color:#fff;box-shadow:2px 2px 4px 0 #2f3542;display:inline-block;text-transform:uppercase;font-weight:bold;font-size:10px;cursor:pointer}.setup_action--setup-type:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f067"}.setup_action--toggle-type{cursor:pointer}.setup_action--toggle-type:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f021"}.fatex__templates{padding:10px;display:flex;align-items:center;min-width:100%}.fatex__template__break{width:100%}.fatex__template{min-width:200px}.fatex__template+.fatex__template{margin-left:10px}.fatex__template__create{cursor:pointer}.fatex__template__header__settings{cursor:pointer}.fatex__template__information{padding:10px;display:grid;grid-template-columns:min-content auto;grid-auto-rows:auto;column-gap:20px;margin-bottom:10px}.fatex__template__create{white-space:nowrap}.fatex__template__information__name{font-weight:bold}.fatex__template__information__name::after{content:":"}.fatex__template__actions{display:flex;flex-direction:column;justify-content:space-between}.fatex__template__actions>span{text-align:center;color:#fff;background:#2f3542;padding:5px;border-radius:5px}.fatex__template__actions>span:before{margin-right:10px}.fatex__template__actions span+span{margin-top:5px}.fatex__template__image{height:125px;background-position:center center;background-size:cover;margin:10px;border-radius:5px}.fatex__template__or{text-transform:uppercase;padding:20px;font-size:30px;font-weight:bold}.fatex__template__help{font-size:12px;text-align:center}#template-actors .fatex__template__help{min-width:100%}.fatex__template__help p{margin:20px}.fatex__template__help .fatex__template__header__settings{padding-top:30px}.fatex__template__help .fatex__template__header__settings span,.fatex__template__help .fatex__template__header__settings i{color:#2f3542}.fatex__artwork{position:relative;padding:10px}.fatex__artwork--hidden{display:none}.fatex__artwork--image{width:100%;height:200px;background-size:cover;background-position:center center;clip-path:polygon(0 25px, 25px 0%, 100% 0%, 100% 0%, 100% calc(100% - 25px), calc(100% - 25px) 100%, 0 100%, 0 100%)}.fatex__artwork--handler{position:absolute;width:100%;height:100%;top:0;left:0;cursor:pointer;opacity:0}.fatex__aspects{padding:10px}.fatex__aspect+.fatex__aspect{padding-top:10px}.fatex__aspect__actions_wrapper{position:relative}.fatex__aspect__actions{font-size:18px}.fatex__aspect__input{border-radius:3px;border-bottom:1px solid #2f3542;padding:3px 0}.fatex__skill__reference{display:flex;justify-content:space-between}.fatex__skill__reference__actions{margin-right:20px;display:flex;flex-direction:row;align-items:center}.fatex__skill__reference__description{font-size:12px;padding:0 10px}.fatex__skill__reference+.fatex__skill__reference{margin-top:10px}.fatex__skill__references__settings{margin-bottom:10px}.fatex__biography{width:100%;min-height:200px;display:flex}.fatex__biography>.editor{width:100%;min-height:200px}.fatex__chat__headline__wrapper{width:70%;margin:auto;position:relative;margin-bottom:10px;margin-top:10px}.fatex__chat__headline__icon{position:absolute;top:0;left:100%;transform:translate(-25px, 0px);font-weight:900;font-size:24px;color:#f1f2f6;-webkit-text-stroke:2px #2f3542;text-shadow:initial}.fatex__chat__headline__icon--negative{color:#f21628}.fatex__chat__dice{width:50%;margin:auto;display:flex;justify-content:space-between;margin-bottom:20px}.fatex__chat__die{font-family:"Fate Icons", sans-serif;font-size:24px;color:#2f3542}.fatex__chat__total{text-align:center;font-weight:700;font-size:26px}.fatex__chat__ladder{color:#2f3542;font-weight:300;font-size:12px;display:block}.fatex__consequences{padding:10px}.fatex__consequence+.fatex__consequence{padding-top:10px}div.fatex__consequence--condition{padding-left:36px}.fatex__consequence__actions_wrapper{position:relative}.fatex__consequence__actions{font-size:18px}.fatex__consequence__input{border-radius:3px;border-bottom:1px solid #2f3542;padding:3px 0}.fatex__consequence__box{position:absolute;top:0;right:100%;width:24px;height:24px;border:2px solid #2f3542;transform:translate(-8px, 5px);display:flex;flex-direction:column;justify-content:center}.fatex__consequence__box__label{position:absolute;left:0;top:0;transform:translate(-60%, -40%);font-weight:900;font-size:24px;color:#2f3542;text-shadow:1px 1px 1px #f1f2f6}.fatex__consequence__box__checkbox{position:absolute;opacity:0;left:-5000px}.fatex__consequence__box__checkbox:checked+.fatex__consequence__box__icon{opacity:1}.fatex__consequence__box__icon{width:100%;text-align:center;font-size:18px;opacity:0}.fatex__consequence__box__icon:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f00d"}.fatex__copyright{padding:10px;font-size:10px;text-align:center;color:#2f3542}.fatex__copyright p{margin:0}.desk{display:grid;grid-template-columns:1fr;grid-template-rows:min-content minmax(100px, 100%) min-content;grid-template-areas:"header" "content" "footer";height:100%;max-height:100%}.desk__header{grid-area:header;box-shadow:0 2px 15px 0 #2f3542;background:#2f3542;z-index:5}.desk__content{grid-area:content;overflow-y:auto;scrollbar-width:thin}.desk__content .desk__content__inner{display:flex;height:auto;min-height:100%}.desk__content .desk__tabloid{flex:4;min-width:650px;display:grid;grid-template-columns:55% 1fr;grid-template-rows:min-content min-content 1fr min-content;grid-template-areas:"messages messages" "aspects consequences" "tabs tabs" "copyright copyright"}.desk__content .desk__tabloid .desk__aspects{grid-area:aspects}.desk__content .desk__tabloid .desk__consequences{grid-area:consequences}.desk__content .desk__tabloid .desk__tabs{grid-area:tabs}.desk__content .desk__tabloid .desk__copyright{grid-area:copyright}.desk__content .desk__tabloid .desk__messages{grid-area:messages}.desk__content .desk__sidebar{flex:1;min-width:240px;box-shadow:10px 0 15px 0 #2f3542}.desk__content .desk__content__inner--flipped{flex-direction:row-reverse}.desk__content .desk__content__inner--flipped .desk__sidebar{box-shadow:-10px 0 15px 0 #2f3542}.desk__footer{grid-area:footer}.fatex__dialog{font-family:"Montserrat",sans-serif}.fatex__dialog button{font-family:"Montserrat",sans-serif}.fatex__dialog .window-content{padding:10px;background:#f1f2f6}.fatex__dialog .dialog-buttons{display:flex;margin-top:10px}.fatex__dialog .dialog-buttons button{background:rgba(0,0,0,0.1);border:2px groove #f0f0e0}.fatex__extras__wrapper{display:flex;flex-wrap:wrap}.fatex__extra{width:100%;padding:10px}.fatex__extra .fatex__headline{padding-right:40px}.fatex__extra .fatex__headline__actions.fatex__item__actions{right:35px}.fatex__extra__description{font-size:12px}.fatex__extra__collapsed{padding-bottom:0}.fatex__extra__collapsed h2{margin:0}.fatex__header{height:100%;position:relative;display:flex;justify-content:space-between}.fatex__header input[type="text"].fatex__header__name__input,.fatex__header input[type="text"].fatex__header__fp__input,.fatex__header input[type="text"].fatex__header__refresh__input{color:#fff;height:25px;font-size:23px;border:0}.fatex__header input[type="text"].fatex__header__fp__input,.fatex__header input[type="text"].fatex__header__refresh__input{width:40px;text-align:center}.fatex__header__center,.fatex__header__name{padding:10px;display:flex;flex-direction:column-reverse}.fatex__header__name{width:50%}.fatex__header__center{align-items:center}.fatex__header__fate-points{display:flex;padding:10px;flex-direction:column-reverse}.fatex__header__label{text-transform:uppercase;font-size:10px;font-weight:300;letter-spacing:3px;color:#fff;padding-left:2px;padding-top:3px;white-space:nowrap}.fatex__header__label--center{padding-left:0}.fatex__header__fate-points__wrapper{display:flex;justify-content:center}.fatex__header__fatepoint_divider{font-size:25px;line-height:25px;color:#fff}.fatex__header__logo{display:flex;flex-direction:column;justify-content:center;padding:calc(10px - 2px);text-align:right}.fatex__header__logo__image{display:inline;height:40px}.fatex__headline{background:#2f3542;color:#fff;padding:5px 20px 5px 20px;clip-path:polygon(0 15px, 15px 0%, 100% 0%, 100% 0%, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 100%);position:relative;font-weight:bold;text-transform:uppercase;font-size:13px;box-shadow:1px 1px 1px #a0a0a0}.fatex__headline--icon{position:relative}.fatex__headline--center{text-align:center}.fatex__headline__actions.fatex__item__actions,.fatex__headline__actions{display:flex;align-items:center;background:#2f3542;background:linear-gradient(90deg, rgba(47,53,66,0) 0%, #2f3542 33%, #2f3542 100%);position:absolute;height:100%;top:0;right:0;opacity:0;transition:opacity 0.2s;padding-left:50px;text-shadow:1px 1px 2px #a0a0a0;pointer-events:none;right:10px}.fatex__headline__actions.fatex__item__actions>*,.fatex__headline__actions>*{margin-right:10px}.fatex__helper__editmode{transition:all 0.2s;opacity:0}.fatex__helper__editmode:hover,.fatex__helper--enable-editmode .fatex__helper__editmode{opacity:1}.fatex__helper__editmode--vanish{display:none}.fatex__helper--enable-editmode .fatex__helper__editmode--vanish{display:inherit}.fatex__helper--is-disabled{opacity:0.3}.fatex__input{display:flex;flex-direction:column-reverse;position:relative}.fatex__input--icon{padding-left:10px}.fatex__input__label{text-transform:uppercase;font-size:8px;font-weight:500;letter-spacing:3px;color:#2f3542;padding-left:5px;padding-top:3px;white-space:nowrap}.fatex__input input[type="text"].fatex__input__input,.fatex__input__input{padding-left:calc(10px / 2);height:auto;min-height:24px;border:0;border-bottom:1px solid #2f3542;border-radius:3px}.fatex__input input[type="text"].fatex__input__input::placeholder,.fatex__input__input::placeholder{color:#2f3542;opacity:0.3}.fatex__input__input:focus ~ .fatex__item__actions{opacity:0;pointer-events:none}.fatex__input__textarea{height:auto;border-bottom:1px solid #2f3542;border-radius:3px}.fatex__input__icon{position:absolute;top:0;right:100%;transform:translate(2px, -7px);font-weight:900;font-size:24px;color:#2f3542;text-shadow:1px 1px 1px #f1f2f6}.fatex__item__header__title{color:#fff;height:25px;font-size:23px}.fatex__item__actions{display:flex;align-items:center;background:#f1f2f6;background:linear-gradient(90deg, rgba(241,242,246,0) 0%, #f1f2f6 33%, #f1f2f6 100%);position:absolute;height:100%;top:0;right:0;opacity:0;transition:opacity 0.2s;padding-left:50px;text-shadow:1px 1px 2px #a0a0a0;pointer-events:none}.fatex__item__actions>*{margin-right:10px}.fatex__helper--enable-editmode .fatex__item__actions{opacity:1;pointer-events:all}.fatex__item__collapsible{display:flex;align-items:center;position:absolute;height:100%;top:0;right:20px;text-shadow:1px 1px 2px #a0a0a0}.fatex__item__add{cursor:pointer}.fatex__item__add:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f067"}.fatex__item__settings{cursor:pointer}.fatex__item__settings:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f013"}.fatex__item__duplicate{cursor:pointer}.fatex__item__duplicate:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f0c5"}.fatex__item__choose{cursor:pointer}.fatex__item__choose:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f477"}.fatex__item__sort{cursor:move}.fatex__item__sort:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f0dc"}.fatex__item__collapse{cursor:pointer}.fatex__item__collapse:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f078"}.fatex__item__collapse--closed{cursor:pointer}.fatex__item__collapse--closed:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f077"}.fatex__item__delete{transition:color 0.2s;cursor:pointer}.fatex__item__delete:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f1f8"}.fatex__item__delete:hover{color:#f21628}.fatex__message{margin:10px;padding:5px;border:1px solid #2f3542;background:rgba(47,53,66,0.3);border-radius:5px}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{box-shadow:0 0 1px #999 inset;border-radius:4px}::-webkit-scrollbar-thumb{outline:none;border-radius:3px;background:#2f3542 !important;border:0}:root{scrollbar-width:thin !important;scrollbar-color:#2f3542 #f1f2f6 !important}input[type="range"]::-webkit-slider-thumb{background:#2f3542;width:18px;cursor:pointer;height:25px;margin-top:-10px}input[type="range"]::-moz-range-thumb{background:#2f3542;height:25px;width:18px;cursor:pointer}.fatex__settings{flex:1}.fatex__setting{padding:10px;display:block;transition:opacity 0.3s}.fatex__setting--disabled{opacity:0.3}.fatex__setting--min-height{min-height:70px}.fatex__setting__pair{display:flex}.fatex__setting__radio__group{display:flex;justify-content:space-around}.fatex__setting__radio{text-align:center;cursor:pointer;border:1px solid #2f3542;opacity:0.3;border-radius:5px;flex-shrink:0;padding:5px}.fatex__setting__radio__group--ranks{padding:0 10px}.fatex__setting__radio__group--ranks .fatex__setting__radio{border:0;color:#2f3542;font-weight:900;font-size:24px;text-shadow:1px 1px 1px #f1f2f6}.fatex__setting__radio__group--ranks .fatex__setting__radio+.fatex__setting__radio{margin-left:5px}.fatex__setting__radio__group--ranks .fatex__setting__radio--active{background:none}.fatex__setting__radio+.fatex__setting__radio{margin-left:10px}.fatex__setting__radio--active{opacity:1}.fatex__setting__radio__label{display:block;font-size:12px}.fatex__setting__radio__image{height:24px;margin:8px}.fatex__setting__radio__image--big{height:40px}.fatex__setting__radio--active{background:rgba(0,0,0,0.05)}.fatex__setting__help{font-size:10px}.fatex__setting__range{display:flex}.fatex__setting__range input[type="text"].fatex__setting__range__value{font-weight:900;font-size:24px;color:#2f3542;text-shadow:1px 1px 1px #f1f2f6;width:50px;text-align:center}.fatex__setting__text div{min-height:200px}.fatex__setting__editor__editor{height:250px;overflow:hidden;border-bottom:1px solid #2f3542;border-radius:3px}.fatex__setting__editor__editor>.editor{height:250px}.fatex__setting__actions{opacity:1;pointer-events:all}.fatex__setting__actions span::before{margin-right:5px}.fatex__app_sheet{font-family:"Montserrat",sans-serif;min-width:500px}.fatex__app_sheet form{max-height:100%}.fatex__app_sheet .window-content{padding:0;background:#f1f2f6}.fatex__app_sheet a:hover{text-shadow:none}.fatex__app_sheet img{border:0}.fatex__app_sheet input[type="text"]{background:transparent;border:0;width:auto;height:auto;padding:0}.fatex__app_sheet textarea{background:transparent;border:0;width:auto;height:auto;padding:0}.fatex__sheet_config{padding:10px;display:none;box-shadow:0 -2px 15px 0 #2f3542;background:#2f3542;z-index:5;color:#fff}.fatex__helper--enable-editmode .fatex__sheet_config{display:block}.fatex__sheet_config h2{font-size:16px;text-transform:uppercase;border:0;font-weight:bold}.fatex__sheet__action{display:block;cursor:pointer}.fatex__item_sheet{font-family:"Montserrat",sans-serif;min-width:300px}.fatex__item_sheet form{max-height:100%}.fatex__item_sheet .window-content{padding:0;background:#f1f2f6}.fatex__item_sheet a:hover{text-shadow:none}.fatex__item_sheet img{border:0}.fatex__item_sheet input[type="text"]{background:transparent;border:0;width:auto;height:auto;padding:0}.fatex__item_sheet textarea{background:transparent;border:0;width:auto;height:auto;padding:0}.fatex__sheet{font-family:"Montserrat",sans-serif}.fatex__sheet form{max-height:100%}.fatex__sheet .window-header a{margin-left:10px}.fatex__sheet .window-content{padding:0;background:#f1f2f6}.fatex__sheet a:hover{text-shadow:none}.fatex__sheet img{border:0}.fatex__sheet input[type="text"]{background:transparent;padding:0}.fatex__sheet h2{border-color:#2f3542}.fatex__skills--columns .fatex__skills__columns{display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:column;grid-column-gap:20px}.fatex__skills__headline{position:relative}.fatex__skill{break-inside:avoid;width:100%;padding:10px 5px;cursor:pointer;display:inline-block}.fatex__helper--enable-editmode .fatex__skill{cursor:default}.fatex__skill--filler{opacity:0}.fatex__skill__icon{transform:translate(15px, -7px);color:#f1f2f6;-webkit-text-stroke:2px #2f3542;text-shadow:initial}.fatex__skill__icon--negative{color:#f21628}.fatex__skill__actions{display:flex;align-items:center;background:#2f3542;background:linear-gradient(90deg, rgba(47,53,66,0) 0%, #2f3542 33%, #2f3542 100%);position:absolute;height:100%;top:0;right:0;opacity:0;transition:opacity 0.2s;padding-left:50px;text-shadow:1px 1px 2px #a0a0a0;pointer-events:none}.fatex__skill__actions>*{margin-right:10px}.fatex__helper--enable-editmode .fatex__skill__actions{opacity:1;pointer-events:all}.fatex__skill__secondary__actions{display:flex;align-items:center;pointer-events:none;position:absolute;left:0;top:0;transform:translate(-15px, 20px);opacity:0;color:#2f3542;font-size:16px;text-shadow:1px -1px 1px #f1f2f6}.fatex__helper--enable-editmode .fatex__skill__secondary__actions{opacity:1;pointer-events:all}.fatex__skill__increment{font-family:"Fate Icons", sans-serif;cursor:pointer}.fatex__skill__decrement{font-family:"Fate Icons", sans-serif;cursor:pointer}.fatex__skill__actions_wrapper{position:relative;color:#fff}.fatex__skill__add{margin-bottom:0;cursor:pointer}.fatex__stress{padding:10px}.fatex__stress__track+.fatex__stress__track{margin-top:10px}.fatex__stress__track__item__checkbox{position:absolute;opacity:0;left:-5000px}.fatex__stress__track__item__checkbox:checked+.fatex__stress__track__item__icon{opacity:1}.fatex__stress__track__items{display:flex;justify-content:space-evenly;margin-top:15px}.fatex__stress__track__items__break{flex-wrap:wrap}.fatex__stress__track__item__box{position:relative;width:30px;height:30px;border:2px solid #2f3542;margin:0 8px 15px;display:flex;flex-direction:column;justify-content:center}.fatex__stress__track__item{position:relative}.fatex__stress__track__break{width:100%}.fatex__stress__track__item__label{position:absolute;left:0;top:0;transform:translate(-60%, -40%);font-weight:900;font-size:24px;color:#2f3542;text-shadow:1px 1px 1px #f1f2f6}.fatex__stress__track__item__icon{width:100%;text-align:center;font-size:25px;opacity:0}.fatex__stress__track__item__icon:before{font-weight:900;font-family:"Font Awesome 5 Free";display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1;-webkit-font-smoothing:antialiased;content:"\\f00d"}.fatex__stress__track__filler{opacity:0;pointer-events:none}.fatex__stress__add{cursor:pointer}.fatex__stress__track__description{font-size:13px;display:inline-block;padding:0 10px;width:100%}.fatex__stunts__headline{position:relative}.fatex__stunt{padding:10px 0}.fatex__stunt .fatex__headline{padding-right:40px}.fatex__stunt .fatex__headline__actions.fatex__item__actions{right:35px}.fatex__stunt__collapsed{padding-bottom:0}.fatex__stunt__collapsed h2{margin:0}.fatex__tabs{padding:10px}.fatex__tabs__tab{padding:10px;padding-bottom:0}.fatex__tabs__navigation{border-bottom:2px solid #2f3542;display:flex;flex-wrap:nowrap;justify-content:space-around}.fatex__tabs__navigation__item{color:#2f3542;padding:5px 20px 5px 15px;font-weight:bold;text-transform:uppercase;font-size:13px;margin-bottom:-1px}.fatex__tabs__navigation__item.active,.fatex__tabs__navigation__item:hover{background:#2f3542;color:#fff;clip-path:polygon(0 0, calc(100% - 15px) 0, 100% calc(100% - 15px), 100% 100%, 0 100%)}.fatex__tabs__tab--skills .fatex__tabs__tab__content{display:flex}.fatex__tabs__tab--skills .fatex__tabs__tab__content .fatex__skills{min-width:220px;width:30%}.fatex__tabs__tab--skills .fatex__tabs__tab__content .fatex__skills--columns{min-width:360px;width:50%}.fatex__tabs__tab--skills .fatex__tabs__tab__content .fatex__stunts{flex-grow:1;padding-left:10px}.fatex__vertical_tabs{display:flex}.fatex__vertical_tabs__content{flex:3;border-left:1px solid #000;margin-left:-1px}.fatex__vertical_tabs__navigation{flex:1;padding:20px 0;display:flex;flex-direction:column}.fatex__vertical_tabs__navigation__item{color:#2f3542;padding:10px;text-transform:uppercase;margin-bottom:20px;font-size:13px;opacity:0.3;width:175px;border:1px solid transparent;transition:opacity 0.3s, background-color 0s}.fatex__vertical_tabs__navigation__item.active,.fatex__vertical_tabs__navigation__item:hover{font-weight:bold;background:#f1f2f6;border:1px solid #2f3542;border-right:0;opacity:1;z-index:1;box-shadow:0 3px 0 0 #2f3542}.fatex__vertical_tabs__tab{padding:10px}\n',""]);const s=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);n&&i[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},84:function(e){e.exports=function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function a(e,a){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return t(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,a):void 0}}(e))||a&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var n=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}})),i=(n.defaults,n.getDefaults,n.changeDefaults,/[&<>"']/),s=/[&<>"']/g,r=/[<>"']|&(?!#?\w+;)/,o=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(e){return l[e]};var p=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function _(e){return e.replace(p,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var f=/(^|[^\[])\^/g;var d=/[^\w:]/g,h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var u={},g=/^[^:]+:\/*[^/]*$/,x=/^([^:]+:)[\s\S]*$/,m=/^([^:]+:\/*[^/]*)[\s\S]*$/;function b(e,t){u[" "+e]||(g.test(e)?u[" "+e]=e+"/":u[" "+e]=k(e,"/",!0));var a=-1===(e=u[" "+e]).indexOf(":");return"//"===t.substring(0,2)?a?t:e.replace(x,"$1")+t:"/"===t.charAt(0)?a?t:e.replace(m,"$1")+t:e+t}function k(e,t,a){var n=e.length;if(0===n)return"";for(var i=0;i<n;){var s=e.charAt(n-i-1);if(s!==t||a){if(s===t||!a)break;i++}else i++}return e.substr(0,n-i)}var y=function(e,t){if(t){if(i.test(e))return e.replace(s,c)}else if(r.test(e))return e.replace(o,c);return e},w=_,v=function(e,t){e=e.source||e,t=t||"";var a={replace:function(t,n){return n=(n=n.source||n).replace(f,"$1"),e=e.replace(t,n),a},getRegex:function(){return new RegExp(e,t)}};return a},S=function(e,t,a){if(e){var n;try{n=decodeURIComponent(_(a)).replace(d,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!h.test(a)&&(a=b(t,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch(e){return null}return a},A={exec:function(){}},T=function(e){for(var t,a,n=1;n<arguments.length;n++)for(a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z=function(e,t){var a=e.replace(/\|/g,(function(e,t,a){for(var n=!1,i=t;--i>=0&&"\\"===a[i];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;n<a.length;n++)a[n]=a[n].trim().replace(/\\\|/g,"|");return a},O=k,F=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var a=e.length,n=0,i=0;i<a;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&--n<0)return i;return-1},C=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},I=function(e,t){if(t<1)return"";for(var a="";t>1;)1&t&&(a+=e),t>>=1,e+=e;return a+e},R=n.defaults,D=O,$=z,N=y,E=F;function L(e,t,a){var n=t.href,i=t.title?N(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:a,href:n,title:i,text:s}:{type:"image",raw:a,href:n,title:i,text:N(s)}}var j=function(){function e(e){this.options=e||R}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var a=this.rules.block.code.exec(e);if(a){var n=t[t.length-1];if(n&&"paragraph"===n.type)return{raw:a[0],text:a[0].trimRight()};var i=a[0].replace(/^ {4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?i:D(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var a=t[0],n=function(e,t){var a=e.match(/^(\s+)(?:```)/);if(null===a)return t;var n=a[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}(a,t[3]||"");return{type:"code",raw:a,lang:t[2]?t[2].trim():t[2],text:n}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var a={type:"table",header:$(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(a.header.length===a.align.length){var n,i=a.align.length;for(n=0;n<i;n++)/^ *-+: *$/.test(a.align[n])?a.align[n]="right":/^ *:-+: *$/.test(a.align[n])?a.align[n]="center":/^ *:-+ *$/.test(a.align[n])?a.align[n]="left":a.align[n]=null;for(i=a.cells.length,n=0;n<i;n++)a.cells[n]=$(a.cells[n],a.header.length);return a}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var a=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:a}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var a,n,i,s,r,o,l,c,p=t[0],_=t[2],f=_.length>1,d={type:"list",raw:p,ordered:f,start:f?+_.slice(0,-1):"",loose:!1,items:[]},h=t[0].match(this.rules.block.item),u=!1,g=h.length;i=this.rules.block.listItemStart.exec(h[0]);for(var x=0;x<g;x++){if(p=a=h[x],x!==g-1){if((s=this.rules.block.listItemStart.exec(h[x+1]))[1].length>i[0].length||s[1].length>3){h.splice(x,2,h[x]+"\n"+h[x+1]),x--,g--;continue}(!this.options.pedantic||this.options.smartLists?s[2][s[2].length-1]!==_[_.length-1]:f===(1===s[2].length))&&(r=h.slice(x+1).join("\n"),d.raw=d.raw.substring(0,d.raw.length-r.length),x=g-1),i=s}n=a.length,~(a=a.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(n-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+n+"}","gm"),"")),o=u||/\n\n(?!\s*$)/.test(a),x!==g-1&&(u="\n"===a.charAt(a.length-1),o||(o=u)),o&&(d.loose=!0),this.options.gfm&&(c=void 0,(l=/^\[[ xX]\] /.test(a))&&(c=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,""))),d.items.push({type:"list_item",raw:p,task:l,checked:c,loose:o,text:a})}return d}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):N(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var a={type:"table",header:$(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(a.header.length===a.align.length){a.raw=t[0];var n,i=a.align.length;for(n=0;n<i;n++)/^ *-+: *$/.test(a.align[n])?a.align[n]="right":/^ *:-+: *$/.test(a.align[n])?a.align[n]="center":/^ *:-+ *$/.test(a.align[n])?a.align[n]="left":a.align[n]=null;for(i=a.cells.length,n=0;n<i;n++)a.cells[n]=$(a.cells[n].replace(/^ *\| *| *\| *$/g,""),a.header.length);return a}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var a=this.rules.block.text.exec(e);if(a){var n=t[t.length-1];return n&&"text"===n.type?{raw:a[0],text:a[0]}:{type:"text",raw:a[0],text:a[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:N(t[1])}},t.tag=function(e,t,a){var n=this.rules.inline.tag.exec(e);if(n)return!t&&/^<a /i.test(n[0])?t=!0:t&&/^<\/a>/i.test(n[0])&&(t=!1),!a&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?a=!0:a&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(a=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:t,inRawBlock:a,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):N(n[0]):n[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var a=E(t[2],"()");if(a>-1){var n=(0===t[0].indexOf("!")?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,n).trim(),t[3]=""}var i=t[2],s="";if(this.options.pedantic){var r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);r?(i=r[1],s=r[3]):s=""}else s=t[3]?t[3].slice(1,-1):"";return L(t,{href:(i=i.trim().replace(/^<([\s\S]*)>$/,"$1"))?i.replace(this.rules.inline._escapes,"$1"):i,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0])}},t.reflink=function(e,t){var a;if((a=this.rules.inline.reflink.exec(e))||(a=this.rules.inline.nolink.exec(e))){var n=(a[2]||a[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var i=a[0].charAt(0);return{type:"text",raw:i,text:i}}return L(a,n,a[0])}},t.strong=function(e,t,a){void 0===a&&(a="");var n=this.rules.inline.strong.start.exec(e);if(n&&(!n[1]||n[1]&&(""===a||this.rules.inline.punctuation.exec(a)))){t=t.slice(-1*e.length);var i,s="**"===n[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(s.lastIndex=0;null!=(n=s.exec(t));)if(i=this.rules.inline.strong.middle.exec(t.slice(0,n.index+3)))return{type:"strong",raw:e.slice(0,i[0].length),text:e.slice(2,i[0].length-2)}}},t.em=function(e,t,a){void 0===a&&(a="");var n=this.rules.inline.em.start.exec(e);if(n&&(!n[1]||n[1]&&(""===a||this.rules.inline.punctuation.exec(a)))){t=t.slice(-1*e.length);var i,s="*"===n[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(s.lastIndex=0;null!=(n=s.exec(t));)if(i=this.rules.inline.em.middle.exec(t.slice(0,n.index+2)))return{type:"em",raw:e.slice(0,i[0].length),text:e.slice(1,i[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var a=t[2].replace(/\n/g," "),n=/[^ ]/.test(a),i=a.startsWith(" ")&&a.endsWith(" ");return n&&i&&(a=a.substring(1,a.length-1)),a=N(a,!0),{type:"codespan",raw:t[0],text:a}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var a,n,i=this.rules.inline.autolink.exec(e);if(i)return n="@"===i[2]?"mailto:"+(a=N(this.options.mangle?t(i[1]):i[1])):a=N(i[1]),{type:"link",raw:i[0],text:a,href:n,tokens:[{type:"text",raw:a,text:a}]}},t.url=function(e,t){var a;if(a=this.rules.inline.url.exec(e)){var n,i;if("@"===a[2])i="mailto:"+(n=N(this.options.mangle?t(a[0]):a[0]));else{var s;do{s=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0]}while(s!==a[0]);n=N(a[0]),i="www."===a[1]?"http://"+n:n}return{type:"link",raw:a[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}},t.inlineText=function(e,t,a){var n,i=this.rules.inline.text.exec(e);if(i)return n=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):N(i[0]):i[0]:N(this.options.smartypants?a(i[0]):i[0]),{type:"text",raw:i[0],text:n}},e}(),q=A,M=v,P=T,G={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:q,table:q,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};G.def=M(G.def).replace("label",G._label).replace("title",G._title).getRegex(),G.bullet=/(?:[*+-]|\d{1,9}[.)])/,G.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,G.item=M(G.item,"gm").replace(/bull/g,G.bullet).getRegex(),G.listItemStart=M(/^( *)(bull)/).replace("bull",G.bullet).getRegex(),G.list=M(G.list).replace(/bull/g,G.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+G.def.source+")").getRegex(),G._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",G._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,G.html=M(G.html,"i").replace("comment",G._comment).replace("tag",G._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),G.paragraph=M(G._paragraph).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",G._tag).getRegex(),G.blockquote=M(G.blockquote).replace("paragraph",G.paragraph).getRegex(),G.normal=P({},G),G.gfm=P({},G.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),G.gfm.nptable=M(G.gfm.nptable).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",G._tag).getRegex(),G.gfm.table=M(G.gfm.table).replace("hr",G.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",G._tag).getRegex(),G.pedantic=P({},G.normal,{html:M("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",G._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:q,paragraph:M(G.normal._paragraph).replace("hr",G.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",G.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var X={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:q,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};X.punctuation=M(X.punctuation).replace(/punctuation/g,X._punctuation).getRegex(),X._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",X._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",X._comment=M(G._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),X.em.start=M(X.em.start).replace(/punctuation/g,X._punctuation).getRegex(),X.em.middle=M(X.em.middle).replace(/punctuation/g,X._punctuation).replace(/overlapSkip/g,X._overlapSkip).getRegex(),X.em.endAst=M(X.em.endAst,"g").replace(/punctuation/g,X._punctuation).getRegex(),X.em.endUnd=M(X.em.endUnd,"g").replace(/punctuation/g,X._punctuation).getRegex(),X.strong.start=M(X.strong.start).replace(/punctuation/g,X._punctuation).getRegex(),X.strong.middle=M(X.strong.middle).replace(/punctuation/g,X._punctuation).replace(/overlapSkip/g,X._overlapSkip).getRegex(),X.strong.endAst=M(X.strong.endAst,"g").replace(/punctuation/g,X._punctuation).getRegex(),X.strong.endUnd=M(X.strong.endUnd,"g").replace(/punctuation/g,X._punctuation).getRegex(),X.blockSkip=M(X._blockSkip,"g").getRegex(),X.overlapSkip=M(X._overlapSkip,"g").getRegex(),X._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,X._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,X._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,X.autolink=M(X.autolink).replace("scheme",X._scheme).replace("email",X._email).getRegex(),X._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,X.tag=M(X.tag).replace("comment",X._comment).replace("attribute",X._attribute).getRegex(),X._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,X._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,X.link=M(X.link).replace("label",X._label).replace("href",X._href).replace("title",X._title).getRegex(),X.reflink=M(X.reflink).replace("label",X._label).getRegex(),X.reflinkSearch=M(X.reflinkSearch,"g").replace("reflink",X.reflink).replace("nolink",X.nolink).getRegex(),X.normal=P({},X),X.pedantic=P({},X.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:M(/^!?\[(label)\]\((.*?)\)/).replace("label",X._label).getRegex(),reflink:M(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",X._label).getRegex()}),X.gfm=P({},X.normal,{escape:M(X.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),X.gfm.url=M(X.gfm.url,"i").replace("email",X.gfm._extended_email).getRegex(),X.breaks=P({},X.gfm,{br:M(X.br).replace("{2,}","*").getRegex(),text:M(X.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var B={block:G,inline:X},H=n.defaults,U=B.block,Z=B.inline,J=I;function V(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Q(e){var t,a,n="",i=e.length;for(t=0;t<i;t++)a=e.charCodeAt(t),Math.random()>.5&&(a="x"+a.toString(16)),n+="&#"+a+";";return n}var Y=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||H,this.options.tokenizer=this.options.tokenizer||new j,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:U.normal,inline:Z.normal};this.options.pedantic?(t.block=U.pedantic,t.inline=Z.pedantic):this.options.gfm&&(t.block=U.gfm,this.options.breaks?t.inline=Z.breaks:t.inline=Z.gfm),this.tokenizer.rules=t}t.lex=function(e,a){return new t(a).lex(e)},t.lexInline=function(e,a){return new t(a).inlineTokens(e)};var a,n,i,s=t.prototype;return s.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},s.blockTokens=function(e,t,a){var n,i,s,r;for(void 0===t&&(t=[]),void 0===a&&(a=!0),e=e.replace(/^ +$/gm,"");e;)if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&t.push(n);else if(n=this.tokenizer.code(e,t))e=e.substring(n.raw.length),n.type?t.push(n):((r=t[t.length-1]).raw+="\n"+n.raw,r.text+="\n"+n.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.nptable(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),n.tokens=this.blockTokens(n.text,[],a),t.push(n);else if(n=this.tokenizer.list(e)){for(e=e.substring(n.raw.length),s=n.items.length,i=0;i<s;i++)n.items[i].tokens=this.blockTokens(n.items[i].text,[],!1);t.push(n)}else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(a&&(n=this.tokenizer.def(e)))e=e.substring(n.raw.length),this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(a&&(n=this.tokenizer.paragraph(e)))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.text(e,t))e=e.substring(n.raw.length),n.type?t.push(n):((r=t[t.length-1]).raw+="\n"+n.raw,r.text+="\n"+n.text);else if(e){var o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}return t},s.inline=function(e){var t,a,n,i,s,r,o=e.length;for(t=0;t<o;t++)switch((r=e[t]).type){case"paragraph":case"text":case"heading":r.tokens=[],this.inlineTokens(r.text,r.tokens);break;case"table":for(r.tokens={header:[],cells:[]},i=r.header.length,a=0;a<i;a++)r.tokens.header[a]=[],this.inlineTokens(r.header[a],r.tokens.header[a]);for(i=r.cells.length,a=0;a<i;a++)for(s=r.cells[a],r.tokens.cells[a]=[],n=0;n<s.length;n++)r.tokens.cells[a][n]=[],this.inlineTokens(s[n],r.tokens.cells[a][n]);break;case"blockquote":this.inline(r.tokens);break;case"list":for(i=r.items.length,a=0;a<i;a++)this.inline(r.items[a].tokens)}return e},s.inlineTokens=function(e,t,a,n){var i;void 0===t&&(t=[]),void 0===a&&(a=!1),void 0===n&&(n=!1);var s,r,o,l=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(l));)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,s.index)+"["+J("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,s.index)+"["+J("a",s[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(r||(o=""),r=!1,i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e,a,n))e=e.substring(i.raw.length),a=i.inLink,n=i.inRawBlock,t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,n)),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),"link"===i.type&&(i.tokens=this.inlineTokens(i.text,[],!0,n)),t.push(i);else if(i=this.tokenizer.strong(e,l,o))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],a,n),t.push(i);else if(i=this.tokenizer.em(e,l,o))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],a,n),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),i.tokens=this.inlineTokens(i.text,[],a,n),t.push(i);else if(i=this.tokenizer.autolink(e,Q))e=e.substring(i.raw.length),t.push(i);else if(a||!(i=this.tokenizer.url(e,Q))){if(i=this.tokenizer.inlineText(e,n,V))e=e.substring(i.raw.length),o=i.raw.slice(-1),r=!0,t.push(i);else if(e){var p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}throw new Error(p)}}else e=e.substring(i.raw.length),t.push(i);return t},a=t,i=[{key:"rules",get:function(){return{block:U,inline:Z}}}],(n=null)&&e(a.prototype,n),i&&e(a,i),t}(),W=n.defaults,K=S,ee=y,te=function(){function e(e){this.options=e||W}var t=e.prototype;return t.code=function(e,t,a){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,n);null!=i&&i!==e&&(a=!0,e=i)}return n?'<pre><code class="'+this.options.langPrefix+ee(n,!0)+'">'+(a?e:ee(e,!0))+"</code></pre>\n":"<pre><code>"+(a?e:ee(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,a,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(a)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,a){var n=t?"ol":"ul";return"<"+n+(t&&1!==a?' start="'+a+'"':"")+">\n"+e+"</"+n+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var a=t.header?"th":"td";return(t.align?"<"+a+' align="'+t.align+'">':"<"+a+">")+e+"</"+a+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,a){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return a;var n='<a href="'+ee(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+a+"</a>"},t.image=function(e,t,a){if(null===(e=K(this.options.sanitize,this.options.baseUrl,e)))return a;var n='<img src="'+e+'" alt="'+a+'"';return t&&(n+=' title="'+t+'"'),n+(this.options.xhtml?"/>":">")},t.text=function(e){return e},e}(),ae=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,a){return""+a},t.image=function(e,t,a){return""+a},t.br=function(){return""},e}(),ne=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var a=e,n=0;if(this.seen.hasOwnProperty(a)){n=this.seen[e];do{a=e+"-"+ ++n}while(this.seen.hasOwnProperty(a))}return t||(this.seen[e]=n,this.seen[a]=0),a},t.slug=function(e,t){void 0===t&&(t={});var a=this.serialize(e);return this.getNextSafeSlug(a,t.dryrun)},e}(),ie=n.defaults,se=w,re=function(){function e(e){this.options=e||ie,this.options.renderer=this.options.renderer||new te,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ae,this.slugger=new ne}e.parse=function(t,a){return new e(a).parse(t)},e.parseInline=function(t,a){return new e(a).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var a,n,i,s,r,o,l,c,p,_,f,d,h,u,g,x,m,b,k="",y=e.length;for(a=0;a<y;a++)switch((_=e[a]).type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(_.tokens),_.depth,se(this.parseInline(_.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(_.text,_.lang,_.escaped);continue;case"table":for(c="",l="",s=_.header.length,n=0;n<s;n++)l+=this.renderer.tablecell(this.parseInline(_.tokens.header[n]),{header:!0,align:_.align[n]});for(c+=this.renderer.tablerow(l),p="",s=_.cells.length,n=0;n<s;n++){for(l="",r=(o=_.tokens.cells[n]).length,i=0;i<r;i++)l+=this.renderer.tablecell(this.parseInline(o[i]),{header:!1,align:_.align[i]});p+=this.renderer.tablerow(l)}k+=this.renderer.table(c,p);continue;case"blockquote":p=this.parse(_.tokens),k+=this.renderer.blockquote(p);continue;case"list":for(f=_.ordered,d=_.start,h=_.loose,s=_.items.length,p="",n=0;n<s;n++)x=(g=_.items[n]).checked,m=g.task,u="",g.task&&(b=this.renderer.checkbox(x),h?g.tokens.length>0&&"text"===g.tokens[0].type?(g.tokens[0].text=b+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=b+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:b}):u+=b),u+=this.parse(g.tokens,h),p+=this.renderer.listitem(u,m,x);k+=this.renderer.list(p,f,d);continue;case"html":k+=this.renderer.html(_.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(_.tokens));continue;case"text":for(p=_.tokens?this.parseInline(_.tokens):_.text;a+1<y&&"text"===e[a+1].type;)p+="\n"+((_=e[++a]).tokens?this.parseInline(_.tokens):_.text);k+=t?this.renderer.paragraph(p):p;continue;default:var w='Token with "'+_.type+'" type was not found.';if(this.options.silent)return void console.error(w);throw new Error(w)}return k},t.parseInline=function(e,t){t=t||this.renderer;var a,n,i="",s=e.length;for(a=0;a<s;a++)switch((n=e[a]).type){case"escape":i+=t.text(n.text);break;case"html":i+=t.html(n.text);break;case"link":i+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":i+=t.image(n.href,n.title,n.text);break;case"strong":i+=t.strong(this.parseInline(n.tokens,t));break;case"em":i+=t.em(this.parseInline(n.tokens,t));break;case"codespan":i+=t.codespan(n.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(n.tokens,t));break;case"text":i+=t.text(n.text);break;default:var r='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(r);throw new Error(r)}return i},e}(),oe=T,le=C,ce=y,pe=n.getDefaults,_e=n.changeDefaults,fe=n.defaults;function de(e,t,a){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(a=t,t=null),t=oe({},de.defaults,t||{}),le(t),a){var n,i=t.highlight;try{n=Y.lex(e,t)}catch(e){return a(e)}var s=function(e){var s;if(!e)try{s=re.parse(n,t)}catch(t){e=t}return t.highlight=i,e?a(e):a(null,s)};if(!i||i.length<3)return s();if(delete t.highlight,!n.length)return s();var r=0;return de.walkTokens(n,(function(e){"code"===e.type&&(r++,setTimeout((function(){i(e.text,e.lang,(function(t,a){if(t)return s(t);null!=a&&a!==e.text&&(e.text=a,e.escaped=!0),0==--r&&s()}))}),0))})),void(0===r&&s())}try{var o=Y.lex(e,t);return t.walkTokens&&de.walkTokens(o,t.walkTokens),re.parse(o,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ce(e.message+"",!0)+"</pre>";throw e}}return de.options=de.setOptions=function(e){return oe(de.defaults,e),_e(de.defaults),de},de.getDefaults=pe,de.defaults=fe,de.use=function(e){var t=oe({},e);if(e.renderer&&function(){var a=de.defaults.renderer||new te,n=function(t){var n=a[t];a[t]=function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];var o=e.renderer[t].apply(a,s);return!1===o&&(o=n.apply(a,s)),o}};for(var i in e.renderer)n(i);t.renderer=a}(),e.tokenizer&&function(){var a=de.defaults.tokenizer||new j,n=function(t){var n=a[t];a[t]=function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];var o=e.tokenizer[t].apply(a,s);return!1===o&&(o=n.apply(a,s)),o}};for(var i in e.tokenizer)n(i);t.tokenizer=a}(),e.walkTokens){var a=de.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),a&&a(t)}}de.setOptions(t)},de.walkTokens=function(e,t){for(var n,i=a(e);!(n=i()).done;){var s=n.value;switch(t(s),s.type){case"table":for(var r,o=a(s.tokens.header);!(r=o()).done;){var l=r.value;de.walkTokens(l,t)}for(var c,p=a(s.tokens.cells);!(c=p()).done;)for(var _,f=a(c.value);!(_=f()).done;){var d=_.value;de.walkTokens(d,t)}break;case"list":de.walkTokens(s.items,t);break;default:s.tokens&&de.walkTokens(s.tokens,t)}}},de.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=oe({},de.defaults,t||{}),le(t);try{var a=Y.lexInline(e,t);return t.walkTokens&&de.walkTokens(a,t.walkTokens),re.parseInline(a,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ce(e.message+"",!0)+"</pre>";throw e}},de.Parser=re,de.parser=re.parse,de.Renderer=te,de.TextRenderer=ae,de.Lexer=Y,de.lexer=Y.lex,de.Tokenizer=j,de.Slugger=ne,de.parse=de,de}()},379:(e,t,a)=>{"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function r(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},n=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=a[l]||0,p="".concat(l," ").concat(c);a[l]=c+1;var _=r(p),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==_?(s[_].references++,s[_].updater(f)):s.push({identifier:p,updater:u(f,t),references:1}),n.push(p)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=a.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function _(e,t,a,n){var i=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var s=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function f(e,t,a){var n=a.css,i=a.media,s=a.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,h=0;function u(e,t){var a,n,i;if(t.singleton){var s=h++;a=d||(d=l(t)),n=_.bind(null,a,s,!1),i=_.bind(null,a,s,!0)}else a=l(t),n=f.bind(null,a,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var i=r(a[n]);s[i].references--}for(var l=o(e,t),c=0;c<a.length;c++){var p=r(a[c]);0===s[p].references&&(s[p].updater(),s.splice(p,1))}a=l}}}}},t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={id:n,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(379),t=a.n(e),n=a(314);t()(n.Z,{insert:"head",singleton:!1}),n.Z.locals;class i{static activateListeners(e,t){}static getSheetData(e,t){return e}}const s={OPERATOR_EQUALS:0,OPERATOR_NOT_EQUALS:1,OPERATOR_GT:2,OPERATOR_LT:3,OPERATOR_GTE:4,OPERATOR_LTE:5},r={OR:0,AND:1};class o extends i{static activateListeners(e,t){e.find(".fatex__skill__reference__create").on("click",(e=>this._onAddReference.call(this,e,t))),e.find(".fatex__skill__reference__create--boxes").on("click",(e=>this._onAddReference.call(this,e,t,1))),e.find(".fatex__skill__reference__change").on("change",(e=>this._onChangeReference.call(this,e,t))),e.find(".fatex__skill__reference__remove").on("click",(e=>this._onRemoveReference.call(this,e,t))),e.find(".fatex__skill__reference__setting").on("change",(e=>this._onChangeSetting.call(this,e,t)))}static async getSheetData(e,t){const a=this.getSkillReferences(t.entity).map(((e,t)=>(e.index=t,e)));return e.statusReferences=a.filter((e=>0===e.type||void 0===e.type)),e.boxReferences=a.filter((e=>1===e.type)),e.skillReferenceSettings=this.getSkillReferenceSettings(t.entity),e.availableSkillLevels=this.getAvailableSkillLevels(),e.availableOperators=this.getAvailableOperators(),e.availableConjunctions=this.getAvailableConjunctions(),e.availableBoxCount=this.getAvailableBoxCount(),e.availableSkills=this.getAllAvailableSkills(),e}static async _onAddReference(e,t,a=0){e.preventDefault();const n=t.entity;await this.addSkillReference(n,a)}static async _onChangeReference(e,t){e.preventDefault();let a=e.currentTarget.value;const n=e.currentTarget.dataset,i=t.entity,s=n.index,r=n.field;"Number"===n.dtype&&(a=parseInt(a)),void 0!==s&&void 0!==r&&await this.changeSkillReference(i,s,r,a)}static async _onChangeSetting(e,t){e.preventDefault();let a=e.currentTarget.value;const n=e.currentTarget.dataset,i=t.entity,s=n.setting;"Number"===n.dtype&&(a=parseInt(a)),void 0!==s&&await this.setReferenceSetting(i,s,a)}static async _onRemoveReference(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.entity,i=a.index;void 0!==i&&new Dialog({title:game.i18n.localize("FAx.Dialog.ReferenceRemove"),content:game.i18n.localize("FAx.Dialog.ReferenceRemoveText"),default:"submit",buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("FAx.Dialog.Cancel"),callback:()=>null},submit:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("FAx.Dialog.Confirm"),callback:async()=>{await this.removeSkillReference(n,i)}}}},{classes:["fatex","fatex__dialog"]}).render(!0)}static async addSkillReference(e,t=0){const a=this.getSkillReferences(e),n=duplicate(a);n.push({type:t,skill:"",condition:0,operator:s.OPERATOR_GTE,default:0,action:0,argument:0,argument2:0,argument3:0}),await e.setFlag("fatex","skillReferences",n)}static async changeSkillReference(e,t,a,n){const i=this.getSkillReferences(e),s=duplicate(i),r=s[t];r[a]=n,s.splice(t,1,r),await e.setFlag("fatex","skillReferences",s)}static async removeSkillReference(e,t){const a=this.getSkillReferences(e),n=duplicate(a);n.splice(t,1),await e.setFlag("fatex","skillReferences",n)}static async setReferenceSetting(e,t,a){await e.setFlag("fatex",`skillReferenceSettings.${t}`,a)}static getReferenceSetting(e,t,a){const n=e.getFlag("fatex",`skillReferenceSettings.${t}`);return void 0===n?a:n}static getSkillReferences(e){return e.getFlag("fatex","skillReferences")||[]}static getAllAvailableSkills(e=!0){const t=[...new Set(game.actors.map((e=>e.items.entries.filter((e=>"skill"===e.type)).map((e=>e.name)))).flat())];return e&&t.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})),t}static getActorSkillByName(e,t){const a=duplicate(e).items.filter((e=>"skill"===e.type&&e.name===t));if(a)return a[0]}static getAvailableSkillLevels(){return[...Array(21).keys()].map((e=>({value:e,label:`+${e}`})))}static getAvailableBoxCount(){return[...Array(21).keys()].map((e=>({value:e-10,label:`${e-10>=0?"+":""}${e-10}`})))}static getAvailableOperators(){return Object.keys(s).map((e=>({value:s[e],label:game.i18n.localize(`FAx.Item.Automation.Operators.${e}`)})))}static getAvailableConjunctions(){return Object.keys(r).map((e=>({value:r[e],label:game.i18n.localize(`FAx.Item.Automation.Conjunctions.${e}`)})))}static checkSkillCondition(e,t,a=s.OPERATOR_GTE){const n=e.data.rank;switch(a){case s.OPERATOR_EQUALS:return n===t;case s.OPERATOR_NOT_EQUALS:return n!==t;case s.OPERATOR_GTE:return n>=t;case s.OPERATOR_GT:return n>t;case s.OPERATOR_LTE:return n<=t;case s.OPERATOR_LT:return n<t}return!1}static getSkillReferenceSettings(e){return{conjunction:this.getReferenceSetting(e,"conjunction",r.OR)}}static getBoxAmountModifier(e){return o.getSkillReferences(e).filter((e=>1===e.type)).reduce(((t,a)=>{const n=o.getActorSkillByName(e.actor,a.skill);return t+(void 0!==n&&o.checkSkillCondition(n,a.condition,a.operator)?a.argument:0)}),0)}static getDisabledState(e){let t=!1;const a=o.getSkillReferences(e).filter((e=>0===e.type||void 0===e.type)),n=o.getReferenceSetting(e,"conjunction",r.OR);n===r.OR&&a.length&&(t=!0);for(const t of a){const a=o.getActorSkillByName(e.actor,t.skill),i=void 0!==a&&o.checkSkillCondition(a,t.condition,t.operator);if(n===r.OR&&i)return!1;if(n===r.AND&&!i)return!0}return t}}class l{static prepareItemData(e,t){return e}static activateActorSheetListeners(e,t){if(!this.entityName)throw new Error("A subclass of the BaseItem must provide an entityName field or implement their own _onItemAdd() method.");e.find(`.fatex__${this.entityName}__add`).click((e=>this._onItemAdd.call(this,e,t))),e.find(`.fatex__${this.entityName}__settings`).click((e=>this._onItemSettings.call(this,e,t))),e.find(`.fatex__${this.entityName}__delete`).click((e=>this._onItemDelete.call(this,e,t)))}static getSheetData(e,t){return e}static getActorSheetData(e,t){return e}static activateListeners(e,t){}static async _onItemAdd(e,t){if(e.preventDefault(),e.stopPropagation(),!this.entityName)throw new Error("A subclass of the BaseItem must provide an entityName field or implement their own _onItemAdd() method.");const a={name:this.defaultName,type:this.entityName};await this.createNewItem(a,t)}static _onItemSettings(e,t){e.preventDefault(),e.stopPropagation();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.item);n&&n.sheet.render(!0)}static _onItemDelete(e,t){e.preventDefault(),e.stopPropagation();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.item);new Dialog({title:`${game.i18n.localize("FAx.Dialog.EntityDelete")} ${n.name}`,content:game.i18n.localize("FAx.Dialog.EntityDeleteText"),default:"submit",buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("FAx.Dialog.Cancel"),callback:()=>null},submit:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("FAx.Dialog.Confirm"),callback:async()=>{await t.actor.deleteOwnedItem(a.item)}}}},{classes:["fatex","fatex__dialog"]}).render(!0)}static async createNewItem(e,t,a=!0){const n=await t.actor.createOwnedItem(e);a&&!t.actor.isToken&&t.actor.getOwnedItem(n._id).sheet.render(!0)}static get defaultName(){return this.entityName.charAt(0).toUpperCase()+this.entityName.slice(1)}static isEditMode(e){return!!jQuery(e.currentTarget).closest(".fatex__helper--enable-editmode").length}}l.entityName="";class c extends l{static activateActorSheetListeners(e,t){super.activateActorSheetListeners(e,t),e.find(".fatex__aspect__input").on("blur",(e=>this._onAspectTextChange.call(this,e,t)))}static _onAspectTextChange(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.itemId),i=$(e.currentTarget).html();n.data.data.value!==i&&n&&n.update({"data.value":i})}}c.entityName="aspect";class p extends l{static prepareItemData(e,t){return e.isConsequence=0===e.data.type,e.isCondition=1===e.data.type,t.isOwned&&(e.isDisabled=o.getDisabledState(t)),e}static activateActorSheetListeners(e,t){super.activateActorSheetListeners(e,t),e.find(".fatex__consequence__box").click((e=>this._onToggleCondition.call(this,e,t))),e.find(".fatex__consequence__input").on("blur",(e=>this._onConsequenceTextChange.call(this,e,t)))}static _onToggleCondition(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.item);n&&n.update({"data.active":!n.data.data.active},{})}static _onConsequenceTextChange(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.itemId),i=$(e.currentTarget).html();n.data.data.value!==i&&n&&n.update({"data.value":i},{})}}p.entityName="consequence";var _=a(84);class f extends l{static getActorSheetData(e){if(CONFIG.FateX.global.useMarkdown)for(const t of e.stunts)t.data.markdown=_(t.data.description);return e}static activateActorSheetListeners(e,t){super.activateActorSheetListeners(e,t),e.find(".fatex__item__collapse").click((e=>this._onCollapseToggle.call(this,e,t)))}static async _onCollapseToggle(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.item);n&&await n.update({"data.collapsed":!n.data.data.collapsed},{})}}f.entityName="stunt";class d extends l{static get entityName(){return"stress"}static activateActorSheetListeners(e,t){super.activateActorSheetListeners(e,t),e.find(".fatex__stress__track__item__box").click((e=>this._onStressBoxToggle.call(this,e,t)))}static prepareItemData(e,t){let a=parseInt(e.data.size)+o.getBoxAmountModifier(t);return a<0&&(a=0),e.boxes=[...Array(a).keys()].map((t=>({isChecked:e.data.value&2**t,label:this._getBoxLabel(e,t)}))),e.fillers=a%4==0?[]:[...Array(4-a%4).keys()],t.isOwned&&(e.isDisabled=a<=0||o.getDisabledState(t)),e}static _getBoxLabel(e,t){return 1===e.data.labelType?"1":2===e.data.labelType?e.data.customLabel.split(" ")[t]:t+1}static _getToggledStressValue(e,t){return e^2**t}static _onStressBoxToggle(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.item),i=a.index;if(n){const e=d._getToggledStressValue(n.data.data.value,i);n.update({"data.value":e},{})}}}const h={itemClasses:{stress:d,aspect:c,consequence:p,skill:class extends l{static get entityName(){return"skill"}static activateActorSheetListeners(e,t){super.activateActorSheetListeners(e,t),e.find(".fatex__skill").click((e=>this._onRollSkill.call(this,e,t))),e.find(".fatex__skill__increment").click((e=>this._onSkillChangeRank.call(this,e,t,!0))),e.find(".fatex__skill__decrement").click((e=>this._onSkillChangeRank.call(this,e,t,!1)))}static getActorSheetData(e){return e.options.enableColumns=e.skills.length>=8,e.options.numberRows=Math.ceil(e.skills.length/2),e}static prepareItemData(e,t){return e.data.isNegative=e.data.rank<0,e.data.isPositive=e.data.rank>=0,e.data.isNeutral=0===e.data.rank,e}static getSheetData(e,t){e.availableRanks=[];for(let t=0;t<=9;t++)e.availableRanks.push(t);return e}static async _onSkillChangeRank(e,t,a){e.preventDefault(),e.stopPropagation();const n=e.currentTarget.dataset,i=t.actor.getOwnedItem(n.item);if(i){const e=i.data.data.rank;let t;t=a?e>=9?9:e+1:e<=-9?-9:e-1,await i.update({"data.rank":t},{})}}static async _onRollSkill(e,t){if(e.preventDefault(),this.isEditMode(e))return;const a=e.currentTarget.dataset,n=t.actor.getOwnedItem(a.itemId);n&&await this.rollSkill(t,n)}static async rollSkill(e,t){const a=this.prepareItemData(duplicate(t.data),t),n=parseInt(a.data.rank)||0,i=e.actor,s=new Roll("4dF").roll(),r={skill:a,rank:n,dice:this.getDice(s),total:this.getTotalString(s.total+n),ladder:this.getLadderLabel(s.total+n)},o={user:game.user._id,speaker:ChatMessage.getSpeaker({actor:i}),type:CONST.CHAT_MESSAGE_TYPES.ROLL,sound:CONFIG.sounds.dice,roll:s,rollMode:game.settings.get("core","rollMode"),flags:{templateVariables:r}};o.content=await renderTemplate("systems/fatex/templates/chat/roll-skill.html",r),await ChatMessage.create(o)}static getDice(e){const t=isNewerVersion("0.7.0",game.data.version);return(t?e.parts[0].rolls:e.terms[0].results).map((e=>({value:e.roll,face:this.getDieFace(t?e.roll:e.result)})))}static getDieFace(e){return e>0?"+":e<0?"-":"0"}static getLadderLabel(e){return e>8&&(e=8),e<-4&&(e=-4),game.i18n.localize("FAx.Global.Ladder."+this.getTotalString(e))}static getLadderPrefix(e){return e<0?"-":"+"}static getTotalString(e){return this.getLadderPrefix(e).concat(Math.abs(e).toString())}},stunt:f,extra:class extends f{static get entityName(){return"extra"}}},sheetComponents:{actor:{sortable:class extends i{static activateListeners(e,t){e.find(".fatex__sortable").each(((e,a)=>{a.addEventListener("dragstart",(e=>t._onDragStart.call(t,e)),!1)})),e.find(".fatex__item__sort").mousedown((e=>this._onDragHandlerMouseDown.call(this,e))),e.find(".fatex__item__sort").mouseup((e=>this._onDragHandlerMouseUp.call(this,e)))}static _onDragHandlerMouseDown(e){$(e.currentTarget).parents(".fatex__sortable").get(0).setAttribute("draggable","true")}static _onDragHandlerMouseUp(e){$(e.currentTarget).parents(".fatex__sortable").get(0).setAttribute("draggable","false")}},configuration:class extends i{}},item:{radio:class extends i{static activateListeners(e,t){e.find(".fatex__setting__radio").click((e=>this._onSettingsRadio.call(this,e,t)))}static _onSettingsRadio(e,t){e.preventDefault();const a=e.currentTarget.dataset,n=a.name,i=t.entity;let s="";s="Number"===a.dtype?parseInt(a.value):a.value,i.update({[n]:s})}},rangeSlider:class extends i{static activateListeners(e){e.find(".fatex__setting__range__value").on("change",(e=>this._onChangeRangeValue.call(this,e))),e.find(".fatex__setting__range__slider").on("input",(e=>this._onChangeRangeSlider.call(this,e)))}static _onChangeRangeSlider(e){e.preventDefault(),e.currentTarget.previousElementSibling.value=e.currentTarget.value}static _onChangeRangeValue(e){e.preventDefault(),e.currentTarget.nextElementSibling.value=e.currentTarget.value}},automation:o}},applications:{templateSettings:null,templatePicker:null},global:{useMarkdown:!1}};class u{async getAvailableSystems(){let e=game.i18n.lang,t=await fetch(`systems/fatex/data/${e}/systems.json`);return 200!==t.status&&(e="en",t=await fetch(`systems/fatex/data/${e}/systems.json`)),{lang:e,availableSystems:await t.json()}}async getSystems(){const{lang:e,availableSystems:t}=await this.getAvailableSystems();return Promise.all(t.map((async t=>await this.fetchSystemByName(e,t))))}async fetchSystemByName(e,t){const a=await fetch(`systems/fatex/data/${e}/systems/${t}.json`);return 200===a.status?await a.json():{}}}const g={1:"aspect",2:"consequence",3:"skill",4:"stress"};class x extends FormApplication{constructor(e,t){super(e,t),this.actor.apps[this.appId]=this}get actor(){return this.object}static get defaultOptions(){const e=super.defaultOptions;return e.classes||(e.classes=[]),mergeObject(e,{title:game.i18n.localize("FAx.Apps.Setup.Title"),template:"/systems/fatex/templates/apps/sheet-setup.html",resizable:!0,classes:e.classes.concat(["fatex fatex__app_sheet"]),width:600,height:700,scrollY:[".desk__content"],tabs:[{navSelector:".fatex__vertical_tabs__navigation",contentSelector:".fatex__vertical_tabs__content"}]}),e}async getData(){const e={options:this.options,isOwnedBy:!!this.actor&&this.actor.name,hasAspects:!!this.actor.items.filter((e=>"aspect"===e.type)).length,hasSkills:!!this.actor.items.filter((e=>"skill"===e.type)).length,hasConsequences:!!this.actor.items.filter((e=>"consequence"===e.type)).length,hasStress:!!this.actor.items.filter((e=>"stress"===e.type)).length,hasAny:!!this.actor.items.entries.length},t=new u;return e.systems=await t.getSystems(),e}activateListeners(e){super.activateListeners(e),e.find(".setup_action--clear").click((e=>this._onClear.call(this,e,0))),e.find(".setup_action--clear-stress").click((e=>this._onClear.call(this,e,4))),e.find(".setup_action--clear-skills").click((e=>this._onClear.call(this,e,3))),e.find(".setup_action--clear-consequences").click((e=>this._onClear.call(this,e,2))),e.find(".setup_action--clear-aspects").click((e=>this._onClear.call(this,e,1))),e.find(".setup_action--setup-type").click((e=>this._onSetupType.call(this,e))),e.find(".setup_action--toggle-type").click((e=>this._onToggleType.call(this,e)))}async _onSetupType(e){e.preventDefault();const t=$(e.currentTarget).parents(".fatex__sheet_setup__type").first().find("input:checked");if(!t.length)return;const a=t.toArray().map((e=>e.dataset.entity?JSON.parse(e.dataset.entity):{}));await this.actor.createOwnedItem(a),this.render(!0)}async _onToggleType(e){e.preventDefault();const t=$(e.currentTarget).parents(".fatex__sheet_setup__type, .fatex__sheet_setup__group").first().find("input");t.prop("checked",!t.first().prop("checked"))}async _onClear(e,t){e.preventDefault(),void 0!==t&&new Dialog({title:game.i18n.localize("FAx.Dialog.ActorClear"),content:game.i18n.localize("FAx.Dialog.ActorClearText"),default:"cancel",buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("FAx.Dialog.Cancel"),callback:()=>null},submit:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("FAx.Dialog.Confirm"),callback:async()=>{await this._doClear(t)}}}},{classes:["fatex","fatex__dialog"]}).render(!0)}async _doClear(e){let t=this.actor.data.items;e>0&&(t=t.filter((t=>t.type===g[e])));const a=t.map((e=>e._id));await this.actor.deleteOwnedItem(a),this.render(!0)}async _updateObject(){}}class m extends ActorSheet{static get defaultOptions(){const e=super.defaultOptions;return e.classes||(e.classes=[]),mergeObject(e,{classes:e.classes.concat(["fatex fatex__sheet"]),template:"",tabs:[{navSelector:".fatex__tabs__navigation",contentSelector:".fatex__tabs__content",initial:"skills"}],scrollY:[".desk__content"],width:900}),e}get template(){return!game.user.isGM&&this.actor.limited?"systems/fatex/templates/actor/limited.html":"systems/fatex/templates/actor/character.html"}activateListeners(e){super.activateListeners(e);for(const t in CONFIG.FateX.itemClasses)CONFIG.FateX.itemClasses[t].activateActorSheetListeners(e,this);for(const t in CONFIG.FateX.sheetComponents.actor)CONFIG.FateX.sheetComponents.actor[t].activateListeners(e,this)}getData(){let e={owner:this.actor.owner,options:this.options,editable:this.isEditable,isTemplateActor:this.actor.isTemplateActor,isEmptyActor:!this.actor.items.size,config:CONFIG.FateX};e.actor=duplicate(this.actor.data),e.data=e.actor.data,e.items=this.actor.items.map((e=>e.data)).sort(this._sortItems),e.stress=e.items.filter((e=>"stress"===e.type)),e.aspects=e.items.filter((e=>"aspect"===e.type)),e.skills=e.items.filter((e=>"skill"===e.type)),e.stunts=e.items.filter((e=>"stunt"===e.type)),e.extras=e.items.filter((e=>"extra"===e.type)),e.consequences=e.items.filter((e=>"consequence"===e.type));for(const t in CONFIG.FateX.itemClasses)e=CONFIG.FateX.itemClasses[t].getActorSheetData(e,this);return e}_getHeaderButtons(){let e=super._getHeaderButtons();const t=game.user.isGM||this.actor.owner;return this.options.editable&&t&&(e=[{label:game.i18n.localize("FAx.Sheet.Buttons.EditMode"),class:"fatex-toggle-edit-mode",icon:"fas fa-edit",onclick:e=>this._onToggleEditMode(e)},{label:game.i18n.localize("FAx.Sheet.Buttons.SheetSetup"),class:"fatex-open-sheet-manager",icon:"fas fa-tools",onclick:e=>this._onOpenSheetSetup(e)}].concat(e)),e}_sortItems(e,t){return(e.sort||0)-(t.sort||0)}_onToggleEditMode(e){e.preventDefault(),$(e.currentTarget).parents(".app").find(".window-content").toggleClass("fatex__helper--enable-editmode")}_onOpenSheetSetup(e){e.preventDefault(),new x(this.actor,{}).render(!0)}async _onDrop(e){let t;try{t=JSON.parse(e.dataTransfer.getData("text/plain"))}catch(e){return!1}return"JournalEntry"===t.type?this._onDropJournalEntry(t):super._onDrop(e)}async _onDropJournalEntry(e){const t=await JournalEntry.fromDropData(e),a=this.actor,n={type:"extra",name:t.data.name,data:{description:t.data.content}};await a.createOwnedItem(n)}}class b extends m{}class k extends Actor{static async create(e,t={}){return e._id||Object.prototype.hasOwnProperty.call(e,"data")?super.create(e,t):CONFIG.FateX.applications.templatePicker.render(!0)}static async createDialog(e={},t={}){return CONFIG.FateX.applications.templatePicker.render(!0)}static async _create(e,t={}){return e.token=e.token||{},mergeObject(e.token,{vision:!0,dimSight:30,brightSight:0,actorLink:!0,disposition:1},{overwrite:!1}),mergeObject(e.token,{img:CONST.DEFAULT_TOKEN},{overwrite:!0}),super.create(e,t)}render(e=!1,t={}){super.render(e,t);for(const e in CONFIG.FateX.applications)CONFIG.FateX.applications[e].render()}get _sheetClass(){return this.isTemplateActor?b:super._sheetClass}get isTemplateActor(){return!!this.getFlag("fatex","isTemplateActor")}get visible(){return!this.isTemplateActor&&super.visible}_onModifyEmbeddedEntity(e,t,a,n,i={}){super._onModifyEmbeddedEntity(e,t,a,n,i),"OwnedItem"===e&&this.items.forEach((e=>e.prepareData()))}}class y extends m{}class w extends ItemSheet{static get defaultOptions(){const e=super.defaultOptions;return e.classes||(e.classes=[]),mergeObject(e,{classes:e.classes.concat(["fatex fatex__item_sheet"]),scrollY:[".desk__content"],width:575}),e}getData(){let e=super.getData();e.isOwnedBy=!!this.actor&&this.actor.name,e=CONFIG.FateX.itemClasses[this.item.type].getSheetData(e,this);for(const t in CONFIG.FateX.sheetComponents.item)Object.prototype.hasOwnProperty.call(CONFIG.FateX.sheetComponents.item,t)&&(e=CONFIG.FateX.sheetComponents.item[t].getSheetData(e,this));return e}get template(){return`systems/fatex/templates/item/${this.item.data.type}-sheet.html`}activateListeners(e){super.activateListeners(e);for(const t in CONFIG.FateX.sheetComponents.item)Object.prototype.hasOwnProperty.call(CONFIG.FateX.sheetComponents.item,t)&&CONFIG.FateX.sheetComponents.item[t].activateListeners(e,this);CONFIG.FateX.itemClasses[this.item.type].activateListeners(e,this)}}class v extends w{}class S extends w{}class A extends w{}class T extends Item{prepareData(){super.prepareData();const e=this.data;CONFIG.FateX.itemClasses[e.type].prepareItemData(e,this)}}class z extends w{}class O extends w{}class F extends w{}class C extends FormApplication{static get defaultOptions(){const e=super.defaultOptions;return e.classes||(e.classes=[]),mergeObject(e,{title:game.i18n.localize("FAx.Settings.Templates.App.Title"),template:"/systems/fatex/templates/apps/template-actors.html",id:"template-actors",resizable:!0,classes:e.classes.concat(["fatex fatex__app_sheet"]),width:920,height:500}),e}getData(){const e=duplicate(game.actors.filter((e=>e.isTemplateActor)));return e.forEach((e=>{e.stress=e.items.filter((e=>"stress"===e.type)),e.aspects=e.items.filter((e=>"aspect"===e.type)),e.skills=e.items.filter((e=>"skill"===e.type)),e.consequences=e.items.filter((e=>"consequence"===e.type))})),{options:this.options,templateActors:e}}activateListeners(e){super.activateListeners(e),e.find(".fatex__template__create").click((e=>this._createTemplate.call(this,e))),e.find(".fatex__template__delete").click((e=>this._deleteTemplate.call(this,e))),e.find(".fatex__template__configure").click((e=>this._configureTemplate.call(this,e))),e.find(".fatex__template__duplicate").click((e=>this._duplicateTemplate.call(this,e)))}async _configureTemplate(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.dataset,a=game.actors.get(t.template);a&&a.sheet.render(!0)}async _deleteTemplate(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.dataset,a=game.actors.get(t.template);a&&new Dialog({title:`${game.i18n.localize("FAx.Dialog.EntityDelete")} ${a.name}`,content:game.i18n.localize("FAx.Dialog.EntityDeleteText"),default:"submit",buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("FAx.Dialog.Cancel"),callback:()=>null},submit:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("FAx.Dialog.Confirm"),callback:async()=>{await a.delete(),this.render(!0),CONFIG.FateX.applications.templatePicker.render()}}}},{classes:["fatex","fatex__dialog"]}).render(!0)}async _createTemplate(e){e.preventDefault();const t={name:game.i18n.localize("FAx.Settings.Templates.New"),type:"character",flags:{fatex:{isTemplateActor:!0}}},a=await k._create(t,{renderSheet:!0});new x(a,{}).render(!0),this.render(!0),CONFIG.FateX.applications.templatePicker.render()}async _duplicateTemplate(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.dataset,a=duplicate(game.actors.get(t.template));a&&(delete a._id,a.name=a.name+` (${game.i18n.localize("FAx.Settings.Templates.Copy")})`,await Actor.create(a,{renderSheet:!0}),this.render(!0),CONFIG.FateX.applications.templatePicker.render())}async _updateObject(){}}class I extends C{static get defaultOptions(){const e=super.defaultOptions;return e.classes||(e.classes=[]),mergeObject(e,{title:game.i18n.localize("ACTOR.Create"),template:"/systems/fatex/templates/apps/template-actors-picker.html",id:"template-actor-picker",resizable:!0,classes:e.classes.concat(["fatex fatex__app_sheet"]),width:1e3,height:430}),e}activateListeners(e){super.activateListeners(e),e.find(".fatex__template__choose").click((e=>this._chooseTemplate.call(this,e))),e.find(".fatex__template__empty").click((e=>this._emptyTemplate.call(this,e))),e.find(".fatex__template__header__settings").click((()=>this._openSettings.call(this)))}async _openSettings(){CONFIG.FateX.applications.templateSettings.render(!0)}async _emptyTemplate(e){e.preventDefault(),e.stopPropagation();const t={name:game.i18n.localize("FAx.Template.Picker.Empty"),type:"character"},a=await k._create(t,{renderSheet:!0});new x(a,{}).render(!0),await this.close()}async _chooseTemplate(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.dataset,a=duplicate(game.actors.get(t.template));a.flags.fatex.templateActor=a._id,delete a._id,delete a.flags.fatex.isTemplateActor,delete a.img,await k._create(a,{renderSheet:!0}),await this.close()}async _updateObject(){}}(class{static hooks(){Hooks.once("ready",(async()=>{CONFIG.FateX.applications.templateSettings=new C({}),CONFIG.FateX.applications.templatePicker=new I({})})),Hooks.on("renderSidebarTab",((e,t)=>{e instanceof Settings&&game.user.isGM&&(t.find('button[data-action="configure"]').before(`\n                <button data-fatex="templates">\n                    <i class="fas fa-file-medical"></i> ${game.i18n.localize("FAx.Settings.Templates.Button")}\n                </button>\n            `),t.on("click",'button[data-fatex="templates"]',(()=>CONFIG.FateX.applications.templateSettings.render(!0))))}))}}).hooks(),Hooks.once("init",(async()=>{console.log("FateX | Initializing Fate extended game system"),CONFIG.FateX=h,CONFIG.Actor.entityClass=k,CONFIG.Item.entityClass=T,CONFIG.FateX.global.useMarkdown=!![...game.modules.values()].filter((e=>"markdown-editor"===e.id&&e.active)).length,await class{static async preloadHandlebarsTemplates(){return loadTemplates(["systems/fatex/templates/actor/character.html","systems/fatex/templates/actor/limited.html","systems/fatex/templates/actor/parts/config.html","systems/fatex/templates/actor/parts/copyright.html","systems/fatex/templates/actor/parts/header.html","systems/fatex/templates/actor/parts/sidebar/artwork.html","systems/fatex/templates/actor/parts/sidebar/stress.html","systems/fatex/templates/actor/parts/tabloid/aspects.html","systems/fatex/templates/actor/parts/tabloid/conditions.html","systems/fatex/templates/actor/parts/tabloid/consequences.html","systems/fatex/templates/actor/parts/tabloid/messages.html","systems/fatex/templates/actor/parts/tabs/bio.html","systems/fatex/templates/actor/parts/tabs/extras.html","systems/fatex/templates/actor/parts/tabs/skills.html","systems/fatex/templates/actor/parts/tabs/stunts.html","systems/fatex/templates/apps/parts/layout/app-footer.html","systems/fatex/templates/apps/parts/layout/app-header.html","systems/fatex/templates/apps/parts/setup/actions.html","systems/fatex/templates/apps/sheet-setup.html","systems/fatex/templates/apps/template-actors-picker.html","systems/fatex/templates/apps/template-actors.html","systems/fatex/templates/chat/roll-skill.html","systems/fatex/templates/item/aspect-sheet.html","systems/fatex/templates/item/consequence-sheet.html","systems/fatex/templates/item/extra-sheet.html","systems/fatex/templates/item/parts/layout/item-footer.html","systems/fatex/templates/item/parts/layout/item-header.html","systems/fatex/templates/item/parts/settings/setting-automation-boxes.html","systems/fatex/templates/item/parts/settings/setting-automation-skill-enable.html","systems/fatex/templates/item/parts/settings/setting-editor.html","systems/fatex/templates/item/parts/settings/setting-input.html","systems/fatex/templates/item/parts/settings/setting-rank.html","systems/fatex/templates/item/parts/settings/setting-text.html","systems/fatex/templates/item/skill-sheet.html","systems/fatex/templates/item/stress-sheet.html","systems/fatex/templates/item/stunt-sheet.html"])}}.preloadHandlebarsTemplates(),class{static registerHelpers(){Handlebars.registerHelper("stringify",(function(e){return JSON.stringify(e)})),Handlebars.registerHelper("ifNth",(function(e,t){return(t.data.index+1)%e==0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifEquals",(function(e,t,a){return e===t?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("ifBiggerNull",(function(e,t){return parseInt(e)>0?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("ifNotEquals",(function(e,t,a){return e!==t?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("ifNotEmpty",(function(e,t){return""!==e?t.fn(this):t.inverse(this)})),Handlebars.registerHelper("checkLength",(function(e,t,a){return e.length>=Number(t)?a.fn(this):a.inverse(this)})),Handlebars.registerHelper("default",(function(e,t){return e&&""!==e?e:new Handlebars.SafeString(t)}))}}.registerHelpers(),Actors.unregisterSheet("core",ActorSheet),Items.unregisterSheet("core",ItemSheet),Actors.registerSheet("FateX",y,{types:["character"],makeDefault:!0}),Items.registerSheet("FateX",O,{types:["stress"],makeDefault:!0}),Items.registerSheet("FateX",v,{types:["aspect"],makeDefault:!0}),Items.registerSheet("FateX",S,{types:["consequence"],makeDefault:!0}),Items.registerSheet("FateX",z,{types:["skill"],makeDefault:!0}),Items.registerSheet("FateX",F,{types:["stunt"],makeDefault:!0}),Items.registerSheet("FateX",A,{types:["extra"],makeDefault:!0})}))})()})();